<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<meta name="theme-color" content="#1d9410" />
<link rel="manifest" href="manifest.webmanifest" />
<link rel="apple-touch-icon" href="icon-192.png" />
<link rel="icon" href="icon-192.png" sizes="192x192" />
<title>Routines</title>
<link rel="stylesheet" href="index.css" />

</head>
<body>
<div class="app" id="app">
  <header>
    <div class="head-wrap">
      <button type="button" class="h-title" id="homeBtn"><img src="icon-192.png" alt="" class="h-logo" /><span class="h-title-text">Routines</span></button>
      <div class="h-grow"></div>
      <button class="icon-btn icon-only" id="configBtn" aria-label="Open configuration">ℹ️</button>
    </div>
  </header>

  <div class="week-controls" id="weekControls">
    <div class="week-nav">
      <button class="icon-btn" id="weekPrev" aria-label="Previous week">←</button>
      <div class="week-label" id="weekLabel"></div>
      <button class="icon-btn" id="weekNext" aria-label="Next week">→</button>
      <button class="icon-btn" id="weekNow" aria-label="Go to current week">Now</button>
    </div>
  </div>

  <main>
    <section class="summary" id="summary">
      <div class="summary-score" id="summaryScore">
        <span class="summary-score-label" id="summaryScoreLabel">Score</span>
        <span class="summary-score-value"><span id="summaryScoreValue">100</span><small>/100</small></span>
      </div>
      <div class="summary-progress" role="img" aria-label="">
        <div class="summary-bar">
          <span class="summary-segment" data-status="green" id="summaryBarGreen"></span>
          <span class="summary-segment" data-status="yellow" id="summaryBarYellow"></span>
          <span class="summary-segment" data-status="red" id="summaryBarRed"></span>
        </div>
      </div>
      <div class="summary-status">
        <span data-status="green"><span class="summary-count" id="pillGreen">0</span><span class="summary-label" id="labelGreen">🟩 Done</span></span>
        <span data-status="yellow"><span class="summary-count" id="pillYellow">0</span><span class="summary-label" id="labelYellow">🟨 Should do</span></span>
        <span data-status="red"><span class="summary-count" id="pillRed">0</span><span class="summary-label" id="labelRed">🟥 Must do</span></span>
      </div>
    </section>

    <section id="home" class="view active">
      <div class="grid" id="catGrid"></div>
    </section>

    <section id="category" class="view">
      <div class="cat-head">
        <button class="back" id="backBtn" aria-label="Go back">←</button>
        <h2 id="catTitle"></h2>
        <button type="button" class="icon-btn icon-only" id="editCategoryBtn" aria-label="Edit category" title="Edit category">✏️</button>
      </div>
      <div class="cat-mood" id="catMood" role="group" aria-label="Select mood"></div>
      <div id="taskList"></div>
    </section>

    <section id="config" class="view">
      <div class="config-panel">
        <div class="config-head">
          <h2>Configuration</h2>
        </div>
        <div class="config-actions">
          <button class="icon-btn" id="configAddCategory">Add category</button>
          <button class="icon-btn" id="configAddActivity">Add activity</button>
          <button class="icon-btn" id="configImport">Import backup (replace)</button>
          <button class="icon-btn" id="configExport">Export backup</button>
        </div>
        <p class="config-note">Importing a backup will replace your current routines and progress.</p>
      </div>
      <input type="file" id="configImportInput" accept="application/json" hidden />
    </section>
  </main>
</div>

<dialog id="languageDialog">
  <div class="modal-head"><span id="languageDialogTitle">Choose your language</span></div>
  <div class="modal-body language-body">
    <p id="languageDialogIntro">Select your preferred language to personalize the experience.</p>
    <div class="language-options">
      <button type="button" class="icon-btn" data-lang="en">English</button>
      <button type="button" class="icon-btn" data-lang="fr">FranÃ§ais</button>
    </div>
  </div>
</dialog>

<dialog id="taskDialog">
  <form method="dialog" id="taskForm">
    <div class="modal-head"><span id="dialogTitle">New activity</span><button type="button" class="icon-btn" id="closeDialog">âœ–</button></div>
    <div class="modal-body">
      <div class="field">
        <label for="f_title">Name</label>
        <input type="text" id="f_title" placeholder="Ex: Brush teeth" required />
      </div>
      <div class="field">
        <label for="f_cat">Category</label>
        <select id="f_cat"></select>
      </div>
      <div class="field">
        <label for="f_importance">Priority</label>
        <select id="f_importance">
          <option value="must">ðŸŸ¥ Must</option>
          <option value="should">ðŸŸ¨ Should</option>
        </select>
      </div>
      <div class="field">
        <label for="f_recur">Frequency</label>
        <select id="f_recur">
          <option value="daily">Daily</option>
          <option value="specific">Specific day(s)</option>
          <option value="weekly">Weekly target</option>
        </select>
      </div>
      <div class="field" id="weeklyWrap" style="display:none">
        <label for="f_weeklyTimes" id="weeklyTimesLabel">Times per week</label>
        <select id="f_weeklyTimes">
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5</option>
          <option value="6">6</option>
        </select>
      </div>
      <div class="field" id="specificWrap" style="display:none">
        <label>Days of the week</label>
        <div class="weekday-picker" id="specificDays"></div>
      </div>
      <div class="field" id="reminderField" style="display:none">
        <label class="toggle">
          <input type="checkbox" id="f_notifyDaily" />
          <span id="reminderLabel">Daily reminder</span>
        </label>
        <div class="reminder-time" id="reminderTimeWrap" role="group" aria-labelledby="reminderTimeLabel">
          <span class="reminder-time-label" id="reminderTimeLabel">Reminder time</span>
          <div class="reminder-time-inputs">
            <label class="sr-only" for="f_reminderHour" id="reminderHourLabel">Hour</label>
            <select id="f_reminderHour" aria-labelledby="reminderHourLabel">
              <option value="00">00</option>
              <option value="01">01</option>
              <option value="02">02</option>
              <option value="03">03</option>
              <option value="04">04</option>
              <option value="05">05</option>
              <option value="06">06</option>
              <option value="07">07</option>
              <option value="08">08</option>
              <option value="09" selected>09</option>
              <option value="10">10</option>
              <option value="11">11</option>
              <option value="12">12</option>
              <option value="13">13</option>
              <option value="14">14</option>
              <option value="15">15</option>
              <option value="16">16</option>
              <option value="17">17</option>
              <option value="18">18</option>
              <option value="19">19</option>
              <option value="20">20</option>
              <option value="21">21</option>
              <option value="22">22</option>
              <option value="23">23</option>
            </select>
            <span aria-hidden="true">:</span>
            <label class="sr-only" for="f_reminderMinute" id="reminderMinuteLabel">Minute</label>
            <select id="f_reminderMinute" aria-labelledby="reminderMinuteLabel">
              <option value="00">00</option>
              <option value="05">05</option>
              <option value="10">10</option>
              <option value="15">15</option>
              <option value="20">20</option>
              <option value="25">25</option>
              <option value="30">30</option>
              <option value="35">35</option>
              <option value="40">40</option>
              <option value="45">45</option>
              <option value="50">50</option>
              <option value="55">55</option>
            </select>
          </div>
        </div>
        <p class="field-note" id="reminderNote">Send a notification every day at your chosen time.</p>
      </div>
      <div class="field">
        <label for="f_emoji">Emoji</label>
        <input type="text" id="f_emoji" placeholder="Ex: ðŸ˜" maxlength="3" />
        <div class="emoji-picker">
          <input type="search" id="emojiSearch" placeholder="Search (fruit, workout, relax...)" />
          <div class="emoji-results" id="emojiResults"></div>
        </div>
      </div>
    </div>
    <div class="modal-actions">
      <button class="icon-btn" value="cancel">Cancel</button>
      <button type="button" class="icon-btn danger" id="deleteTask" style="display:none">Delete</button>
      <button class="icon-btn primary" id="saveTask" value="default">Save</button>
    </div>
  </form>
</dialog>

<dialog id="categoryDialog">
  <form method="dialog" id="categoryForm">
    <div class="modal-head"><span id="catDialogTitle">New category</span><button type="button" class="icon-btn" id="closeCategoryDialog">âœ–</button></div>
    <div class="modal-body">
      <div class="field">
        <label for="c_name">Name</label>
        <input type="text" id="c_name" placeholder="Ex: Mindfulness" required />
      </div>
    </div>
    <div class="modal-actions">
      <button class="icon-btn" value="cancel">Cancel</button>
      <button type="button" class="icon-btn danger" id="deleteCategory" style="display:none">Delete</button>
      <button type="button" class="icon-btn primary" id="saveCategory" value="default">Save</button>
    </div>
  </form>
</dialog>

<script src="index.js"></script>

</body>
</html>
